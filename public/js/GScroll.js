/*
 * GScroll v0.2.4
 * 
 * https://github.com/gesanchez/GScroll
 *
 * Copyright (c) 2014 German Sanchez
 * Licensed under the MIT license.
 *
 */
!function(a,b){function c(b,c){this.element=b,this.options=a.extend({},e,c),this.init()}var d="GScroll",e={width:"300px",height:"200px"};c.prototype={init:function(){var b=this;b.node=a(b.element),b.node.wrap('<div class="GScroll" style="width:'+b.options.width+";height:"+b.options.height+'"></div>').wrap('<div class="GScroll-scrollable"></div>').parent().after('<div class="GScroll-bar"></div>'),b.container=b.node.closest(".GScroll"),b.scrollable=b.node.parent(),b.bar=b.node.parent().next(),b.adjust.call(b),b.events.call(b)},adjust:function(b){var c=this;if(c.conHeight=c.container.height(),c.scrollHeight=0,c.node.is(":not(:visible)")){var d=c.node.clone();d.css({width:c.options.width,visibility:"hidden"}).removeAttr("id").show(),a("body").append(d),c.scrollHeight=d.outerHeight(),d.remove()}else c.scrollHeight=c.scrollable.outerHeight();c.barHeight=Math.max(20,c.conHeight-Math.abs(c.conHeight-c.scrollHeight)),c.bar.css("height",c.barHeight+"px"),b&&b.call(c)},events:function(){var c=this;c.dragActive=!1,c.y=0,c.container.on({"DOMMouseScroll mousewheel":function(a){var b=a.originalEvent,d=b.detail<0||b.wheelDelta>0?1:-1;return c.wheel.call(c,d),!1},mouseenter:function(){c.scrollHeight>c.conHeight&&c.bar.stop(!0,!0).fadeIn()},mouseleave:function(){c.bar.stop(!0,!0).fadeOut(),c.dragActive=!1},mousemove:function(a){a.preventDefault(),c.drag.call(c,a)},mouseup:function(){c.dragActive=!1},focusin:function(b){a(b.target).is("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]")===!0&&c.onFocusIn.call(c,b)}}),c.bar.on({mousedown:function(a){a.preventDefault(),c.dragActive=!0,c.y=a.pageY},mouseup:function(){c.dragActive=!1},mousemove:function(a){a.preventDefault(),c.drag.call(c,a)}}),c.node.on("adjust."+d,function(){c.adjust.call(c,function(){c.onResize.call(c)})}).on("destroy."+d,function(){a.removeData(c.element,"plugin_"+d),c.node.off("."+d),c.node.unwrap().unwrap(),c.bar.remove(),c.element=null,c=null}),a(b).on("adjust."+d,function(){c.adjust.call(c,function(){c.onResize.call(c)})})},wheel:function(a){var b=this,c=b.conHeight-b.barHeight,d=b.conHeight-b.scrollHeight,e=Math.abs(c/Math.abs(d)*15);a>0?b.bar.css({top:Math.max(0,parseFloat(b.bar.css("top"))-e)}):0>a&&b.bar.css({top:Math.min(c,parseFloat(b.bar.css("top"))+e)}),b.scrollable.css({top:Math.min(0,Math.max(d,d/c*parseFloat(b.bar.css("top"))))})},drag:function(a){var b=this,c=b.conHeight-b.barHeight,d=b.conHeight-b.scrollHeight;if(b.dragActive===!0){var e=parseFloat(b.bar.position().top)+a.pageY-b.y;e=Math.min(e,c),b.bar.css({top:Math.max(0,e)+"px"}),b.scrollable.css({top:Math.min(0,Math.max(d,d/c*e))}),b.y=a.pageY}},onResize:function(){var a=this,b=Math.abs(parseFloat(a.scrollable.css("top"))),c=parseFloat(a.bar.css("top")),d=Math.abs(a.conHeight-a.scrollHeight),e=a.conHeight-a.barHeight,f=d/e*c;a.scrollHeight<a.conHeight&&a.bar.hide(),b>d&&a.scrollable.css({top:-d});var g=f/c,h=(f-b)/g;a.bar.css({top:Math.min(e,Math.max(0,c-h))})},onFocusIn:function(c){var d=this,e=a(c.target),f=e.position().top-a(b).scrollTop(),g=d.conHeight-d.barHeight,h=d.conHeight-d.scrollHeight,i=Math.min(g,Math.max(0,g*f/Math.abs(h))),j=h/g*i,k=Math.abs(parseFloat(d.scrollable.css("top"))),l=Math.abs(parseFloat(d.scrollable.css("top")))+d.conHeight;(f+e.outerHeight()<k||f+e.outerHeight()>l)&&(d.bar.css({top:i},200),d.scrollable.css({top:Math.min(0,Math.max(h,j))},200))}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);